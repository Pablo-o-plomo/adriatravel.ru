<script>
let step = 0;
let data = {};

function startQuiz(){
  document.getElementById("quiz").style.display="block";
  window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});
  show();
}

function show(){
  const q=document.getElementById("quiz");

  if(step===0){
    q.innerHTML=`<h2>–ö—É–¥–∞ —Ö–æ—Ç–∏—Ç–µ –ø–æ–µ—Ö–∞—Ç—å?</h2>
    <button class="qbtn" onclick="next('–¢—É—Ä—Ü–∏—è')">–¢—É—Ä—Ü–∏—è</button>
    <button class="qbtn" onclick="next('–ï–≥–∏–ø–µ—Ç')">–ï–≥–∏–ø–µ—Ç</button>
    <button class="qbtn" onclick="next('–û–ê–≠')">–û–ê–≠</button>
    <button class="qbtn" onclick="next('–ü–æ–¥–±–µ—Ä–∏—Ç–µ')">–ù–µ –∑–Ω–∞—é</button>`;
  }

  else if(step===1){
    q.innerHTML=`<h2>–°–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫?</h2>
    <button class="qbtn" onclick="next('1')">1</button>
    <button class="qbtn" onclick="next('2')">2</button>
    <button class="qbtn" onclick="next('–°–µ–º—å—è')">–°–µ–º—å—è</button>
    <button class="qbtn" onclick="next('–ö–æ–º–ø–∞–Ω–∏—è')">–ö–æ–º–ø–∞–Ω–∏—è</button>`;
  }

  else if(step===2){
    q.innerHTML=`<h2>–í–∞—à –±—é–¥–∂–µ—Ç –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞?</h2>
    <button class="qbtn" onclick="next('–¥–æ 80–∫')">–¥–æ 80–∫</button>
    <button class="qbtn" onclick="next('80-120–∫')">80‚Äì120–∫</button>
    <button class="qbtn" onclick="next('120-180–∫')">120‚Äì180–∫</button>
    <button class="qbtn" onclick="next('180–∫+')">180–∫+</button>`;
  }

  else if(step===3){
    q.innerHTML=`<h2>–ö–æ–≥–¥–∞ —Ö–æ—Ç–∏—Ç–µ –≤—ã–ª–µ—Ç?</h2>
    <button class="qbtn" onclick="next('–°—Ä–æ—á–Ω–æ')">–°—Ä–æ—á–Ω–æ</button>
    <button class="qbtn" onclick="next('–í —ç—Ç–æ–º –º–µ—Å—è—Ü–µ')">–í —ç—Ç–æ–º –º–µ—Å—è—Ü–µ</button>
    <button class="qbtn" onclick="next('1-3 –º–µ—Å—è—Ü–∞')">1‚Äì3 –º–µ—Å—è—Ü–∞</button>
    <button class="qbtn" onclick="next('–ü—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä—é')">–ü—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä—é</button>`;
  }

  else if(step===4){
    q.innerHTML=`<h2>–ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–±–æ—Ä?</h2>
    <input id="contact" placeholder="@telegram –∏–ª–∏ –Ω–æ–º–µ—Ä WhatsApp">
    <button class="send" onclick="send()">–ü–æ–ª—É—á–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã</button>`;
  }
}

function next(answer){
  data["q"+step]=answer;
  step++;
  show();
}

function send(){
  const contact=document.getElementById("contact").value || "–Ω–µ —É–∫–∞–∑–∞–ª";

  const message =
`üß≠ –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞ Adria Travel

üåç –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${data.q0}
üë§ –¢—É—Ä–∏—Å—Ç—ã: ${data.q1}
üí∞ –ë—é–¥–∂–µ—Ç: ${data.q2}
üìÖ –°—Ä–æ–∫–∏: ${data.q3}

üìû –ö–æ–Ω—Ç–∞–∫—Ç: ${contact}

#–∫–≤–∏–∑`;

  fetch("https://api.telegram.org/bot7917232792:AAGOFKDGJxgSE11s0csGEaunOcNr71atQzY/sendMessage",{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      chat_id:"436256257",
      text: message
    })
  })
  .then(res => res.json())
  .then(res => {
    if(res.ok){
      document.getElementById("quiz").innerHTML="<h2>–°–ø–∞—Å–∏–±–æ! –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ ‚úàÔ∏è</h2>";
    } else {
      document.getElementById("quiz").innerHTML="<h2>–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ Telegram –≤—Ä—É—á–Ω—É—é üôè</h2>";
      console.log(res);
    }
  })
  .catch(err=>{
    document.getElementById("quiz").innerHTML="<h2>–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.</h2>";
    console.log(err);
  });
}
</script>
